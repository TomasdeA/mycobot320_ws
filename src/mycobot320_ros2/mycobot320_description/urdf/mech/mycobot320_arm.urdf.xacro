<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="mycobot320">

    <xacro:macro name="cylinder_link" params="name mesh origin rpy collision_origin collision_rpy length radius ">
        <link name="${name}">
            <visual>
                <geometry>
                    <mesh filename="${mesh}"/>
                </geometry>
                <origin xyz="${origin}" rpy="${rpy}"/>
            </visual>
            <collision>
                <origin xyz="${collision_origin}"  rpy="${collision_rpy}"/>
                <geometry>
                    <!--<mesh filename="${mesh}"/>-->
                    <cylinder length="${length}" radius="${radius}"/>
                </geometry>
            </collision>
        </link>
    </xacro:macro>


    <!--
    original_length = 0.09
    length = original_length + 3/4 radius
    collision_origin = {0,0,-original_length/2+radius/2}-->
    <xacro:cylinder_link
        name="link1"
        mesh="package://mycobot320_description/meshes/mycobot320/visual/link1.dae"
        origin="0.0 0.0 -0.078"
        rpy="0 0 -${pi/2}"
        collision_origin="0.0 0.0 -0.0235"
        collision_rpy="0 0 ${pi/2}"
        length="0.12375"
        radius="0.04"/>
    <!--All length, radius and collion pose had been graphically obtained.-->
    <xacro:cylinder_link
        name="link2"
        mesh="package://mycobot320_description/meshes/mycobot320/visual/link2.dae"
        origin="0.0 0.0 -0.04"
        rpy="0 ${pi/2} 0"
        collision_origin="0.065 0.0 0.0005"
        collision_rpy="0 ${pi/2} 0"
        length="0.2"
        radius="0.0315"/>

    <xacro:cylinder_link
        name="link3"
        mesh="package://mycobot320_description/meshes/mycobot320/visual/link3.dae"
        origin="0.0 0.0 0.039"
        rpy="${pi/2} ${pi/2} ${pi/2}"
        collision_origin="0.06 0.0 -0.005"
        collision_rpy="${pi/2} ${pi/2} ${pi/2}"
        length="0.175"
        radius="0.03"/>

    <xacro:cylinder_link
        name="link4"
        mesh="package://mycobot320_description/meshes/mycobot320/visual/link4.dae"
        origin="0.0 -0.0024 -0.05"
        rpy="${pi/2} ${pi/2} 0"
        collision_origin="0.0 -0.0234 -0.0"
        collision_rpy="${pi/2} ${pi/2} 0"
        length="0.095"
        radius="0.029"/>

    <xacro:cylinder_link
        name="link5"
        mesh="package://mycobot320_description/meshes/mycobot320/visual/link5.dae"
        origin="0.0 0.0 -0.05"
        rpy="0 0 -${pi/2}"
        collision_origin="0.0 -0.008 0"
        collision_rpy="0 ${pi/2} -${pi/2}"
        length="0.08"
        radius="0.029"/>

    <xacro:cylinder_link
        name="link6"
        mesh="package://mycobot320_description/meshes/mycobot320/visual/link6.dae"
        origin="0.0 0.0 -0.022"
        rpy="${pi/2} ${pi/2} 0"
        collision_origin="0.0 0.0 -0.0125"
        collision_rpy="0 0 0"
        length="0.015"
        radius="0.03"/>

    <xacro:macro name="revolute_joint" params="name parent child origin rpy axis lower upper">
        <joint name="${name}" type="revolute">
            <parent link="${parent}"/>
            <child link="${child}"/>
            <origin xyz="${origin}" rpy="${rpy}"/>
            <axis xyz="${axis}"/>
            <limit lower="${lower}" upper="${upper}" effort="999.0" velocity="0"/>
        </joint>
    </xacro:macro>

    <xacro:revolute_joint 
        name="joint1" 
        parent="base" 
        child="link1" 
        origin="0 0 0.173" 
        rpy="0 0 ${pi}" 
        axis="0 0 1" 
        lower="-2.9321" 
        upper="2.9321"/>

    <xacro:revolute_joint 
        name="joint2" 
        parent="link1" 
        child="link2" 
        origin="0 0.086 0" 
        rpy="0 -${pi/2} ${-pi/2}" 
        axis="0 0 1" 
        lower="-2.3561" 
        upper="2.3561"/>

    <xacro:revolute_joint 
        name="joint3" 
        parent="link2" 
        child="link3" 
        origin="0.13635 0 -0.086" 
        rpy="0 0 0" 
        axis="0 0 1" 
        lower="-2.5307" 
        upper="2.5307"/>

    <xacro:revolute_joint 
        name="joint4" 
        parent="link3" 
        child="link4" 
        origin="0.1195 0 0.082" 
        rpy="0 0 ${pi/2}0" 
        axis="0 0 1" 
        lower="-2.5830" 
        upper="2.5830"/>

    <xacro:revolute_joint 
        name="joint5" 
        parent="link4" 
        child="link5" 
        origin="0 -0.09415 0.0" 
        rpy="${pi/2} 0 0" 
        axis="0 0 1" 
        lower="-2.9321" 
        upper="2.9321"/>

    <xacro:revolute_joint 
        name="joint6" 
        parent="link5" 
        child="link6" 
        origin="0 0.055 0.0" 
        rpy="-${pi/2} 0 0" 
        axis="0 0 1" 
        lower="-3.14159" 
        upper="3.14159"/>

</robot>